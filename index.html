<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¦™å¦™å±‹</title>
    <script src="https://cdn.jsdelivr.net/npm/lunar-javascript@1.6.11/lunar.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&family=Noto+Serif+SC:wght@400;700&display=swap');
        
        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background: #050510;
            color: #fff;
            overflow: hidden;
            font-family: 'Noto Serif SC', serif;
            -webkit-user-select: none;
            user-select: none;
        }

        /* V18.0 ç»ˆæèƒŒæ™¯æ–¹æ¡ˆï¼šçº¯ CSS ç»˜å›¾ (æ— ä»»ä½•å¤–éƒ¨å›¾ç‰‡ä¾èµ–) */
        /* å½»åº•è§£å†³â€œå›¾ç‰‡ä¸æ˜¾ç¤ºâ€é—®é¢˜ */
        #bg-layer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -100;
            background: 
                radial-gradient(circle at 50% 0%, rgba(0, 243, 255, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 0% 100%, rgba(255, 0, 255, 0.1) 0%, transparent 50%),
                linear-gradient(180deg, #050510 0%, #1a1a2e 100%);
        }
        /* èµ›åšç½‘æ ¼ */
        #bg-grid {
            position: fixed;
            bottom: 0; left: 0; width: 100%; height: 40%;
            z-index: -99;
            background-image: 
                linear-gradient(rgba(0, 243, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            perspective: 500px;
            transform: perspective(300px) rotateX(60deg) scale(2);
            opacity: 0.3;
            mask-image: linear-gradient(to bottom, transparent, black);
            -webkit-mask-image: linear-gradient(to bottom, transparent, black);
        }

        .app-wrapper {
            position: relative;
            z-index: 10;
            height: 100%;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding: 20px;
            padding-bottom: 120px;
        }

        .font-ancient { font-family: 'Ma Shan Zheng', cursive; }
        .text-neon-gold { color: #ffd700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.8); }

        .cyber-panel {
            background: rgba(16, 18, 27, 0.85);
            border: 1px solid rgba(0, 243, 255, 0.2);
            backdrop-filter: blur(12px);
            border-radius: 12px;
            margin-bottom: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.6);
        }

        /* è¾“å…¥æ¡†æ ·å¼ä¼˜åŒ– */
        select, input {
            display: block; width: 100%; height: 50px;
            font-size: 16px;
            background-color: rgba(255, 255, 255, 0.95) !important;
            color: #000 !important;
            border: 1px solid #00f3ff;
            border-radius: 8px;
            padding: 0 10px; margin-bottom: 0;
            -webkit-appearance: none; appearance: none;
        }

        /* æŠ¥å‘Šæ’ç‰ˆ */
        .report-section { margin-bottom: 1.5rem; }
        .section-title {
            font-size: 1.1rem; color: #00f3ff; font-weight: bold;
            border-bottom: 1px solid rgba(0, 243, 255, 0.3);
            padding-bottom: 8px; margin-bottom: 12px;
            display: flex; align-items: center;
        }
        .section-title::before {
            content: ''; display: inline-block; width: 4px; height: 16px;
            background: #00f3ff; margin-right: 8px;
            box-shadow: 0 0 8px #00f3ff;
        }
        pre {
            white-space: pre-wrap; word-wrap: break-word;
            line-height: 1.8; font-size: 15px; color: #d1d5db;
            font-family: 'Noto Serif SC', serif;
            text-align: justify;
        }

        .btn-active:active { transform: scale(0.98); opacity: 0.9; }
        .fade-in-up { animation: fadeInUp 0.8s ease-out forwards; opacity: 0; transform: translateY(20px); }
        @keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div id="bg-layer"></div>
    <div id="bg-grid"></div>

    <div class="app-wrapper">
        <header class="text-center pt-10 pb-8 fade-in-up">
            <h1 class="text-6xl font-ancient text-neon-gold mb-2 tracking-widest">å¦™å¦™å±‹</h1>
            <p class="text-[10px] tracking-[0.3em] text-blue-300 font-mono uppercase">System 108.0 // v18.0</p>
        </header>

        <div id="input-section" class="cyber-panel p-6 fade-in-up" style="animation-delay: 0.1s;">
            <div class="text-center mb-6">
                <p class="font-ancient text-2xl text-white">å½•å…¥æ—¶ç©ºåæ ‡</p>
            </div>
            <div class="space-y-6">
                <div>
                    <label class="text-[10px] uppercase text-blue-400 tracking-widest mb-1 block">Name</label>
                    <input type="text" id="name" placeholder="è¾“å…¥æ‚¨çš„å§“å">
                </div>
                <div class="grid grid-cols-3 gap-3">
                    <div>
                        <label class="text-[10px] uppercase text-blue-400 tracking-widest mb-1 block">Year</label>
                        <select id="year"><option value="" disabled selected>å¹´</option><script>for(let i=1950; i<=2030; i++) document.write(`<option value="${i}">${i}å¹´</option>`);</script></select>
                    </div>
                    <div>
                        <label class="text-[10px] uppercase text-blue-400 tracking-widest mb-1 block">Month</label>
                        <select id="month"><option value="" disabled selected>æœˆ</option><script>for(let i=1; i<=12; i++) document.write(`<option value="${i}">${i}æœˆ</option>`);</script></select>
                    </div>
                    <div>
                        <label class="text-[10px] uppercase text-blue-400 tracking-widest mb-1 block">Day</label>
                        <select id="day"><option value="" disabled selected>æ—¥</option><script>for(let i=1; i<=31; i++) document.write(`<option value="${i}">${i}æ—¥</option>`);</script></select>
                    </div>
                </div>
                <div>
                    <label class="text-[10px] uppercase text-blue-400 tracking-widest mb-1 block">Hour</label>
                    <select id="hour">
                        <option value="0">å­æ—¶ (23:00-01:00)</option><option value="1">ä¸‘æ—¶ (01:00-03:00)</option><option value="2">å¯…æ—¶ (03:00-05:00)</option>
                        <option value="3">å¯æ—¶ (05:00-07:00)</option><option value="4">è¾°æ—¶ (07:00-09:00)</option><option value="5">å·³æ—¶ (09:00-11:00)</option>
                        <option value="6">åˆæ—¶ (11:00-13:00)</option><option value="7">æœªæ—¶ (13:00-15:00)</option><option value="8">ç”³æ—¶ (15:00-17:00)</option>
                        <option value="9">é…‰æ—¶ (17:00-19:00)</option><option value="10">æˆŒæ—¶ (19:00-21:00)</option><option value="11">äº¥æ—¶ (21:00-23:00)</option>
                    </select>
                </div>
                <div id="start-btn" class="w-full mt-6 bg-blue-600 text-white font-bold py-4 rounded-xl shadow-lg border border-blue-400 btn-active text-center cursor-pointer select-none">
                    <span class="font-ancient text-xl tracking-[0.5em] pointer-events-none">å¯åŠ¨æ¼”ç®—</span>
                </div>
            </div>
        </div>

        <div id="loading-section" class="hidden h-96 flex flex-col items-center justify-center">
            <div class="w-20 h-20 border-4 border-blue-500/30 border-t-blue-400 rounded-full animate-spin mb-6"></div>
            <p class="font-ancient text-2xl text-white">å¤©æœºæ¼”ç®—ä¸­...</p>
        </div>

        <div id="result-section" class="hidden space-y-6 pb-24"></div>
    </div>

    <script>
        // V18.0 æ ¸å¿ƒé€»è¾‘ï¼šå…¨é‡æœ¬åœ°ç”Ÿæˆå™¨ (Universal Report Generator)
        // å†…ç½® 6 å¤§ç±»å®Œæ•´æ¨¡æ¿ï¼Œæ ¹æ® Lunar.js è®¡ç®—çš„å…«å­—äº”è¡Œè‡ªåŠ¨åŒ¹é…
        // è§£å†³äº†â€œåªæœ‰ç‰¹å®šæ—¥æœŸæœ‰æŠ¥å‘Šâ€çš„é—®é¢˜ï¼Œæ‰€æœ‰æ—¥æœŸå‡ä¸º 1000å­—+ å®Œæ•´æŠ¥å‘Š
        
        const reportTemplates = {
            // 1. é¢†å¯¼å‹ (Purple Star, Sun) - é€‚åˆé˜³ç«/é˜³åœŸ
            leader: {
                star: "ç´«å¾®å¤©ç›¸ (å›è‡£åº†ä¼š)",
                slogan: "æŒå°æŒæƒ Â· æ—¶ä»£çš„é¢†èˆªè€…",
                desc: (info) => `ã€åŸºç¡€ä¿¡æ¯ã€‘
å†œå†${info.lunarYear}å¹´${info.lunarMonth}æœˆ${info.lunarDay}æ—¥${info.lunarHour}æ—¶ï¼Œ${info.yinYang}${info.gender}ã€‚
ç”Ÿè¾°å…«å­—ï¼š${info.bazi}ã€‚

ã€æ ¸å¿ƒæ¶æ„ã€‘
â€¢ å‘½å®«ï¼šå¤©ç›¸æ˜Ÿåå®ˆï¼Œå¯¹å®«ç´«å¾®ç ´å†›ã€‚
â€¢ äº”è¡Œå±€ï¼š${info.wuxing}ã€‚
â€¢ æ ¼å±€ç‰¹ç‚¹ï¼šæ ‡å‡†çš„â€œå›è‡£åº†ä¼šâ€æ ¼ã€‚ç´«å¾®ä¸ºå¸ï¼Œå¤©ç›¸ä¸ºå°ï¼ŒäºŒè€…ç›¸é€¢ï¼Œä¸»æŒæƒæŸ„ã€‚

ã€å‘½ä¸»æ€§æ ¼ï¼šå¤©ç”Ÿçš„ç®¡ç†è€…ã€‘
ä½ æ‹¥æœ‰ä¸ç”Ÿä¿±æ¥çš„å¨ä¸¥ä¸é¢†å¯¼åŠ›ã€‚ä½ ä¸éœ€è¦åˆ»æ„å¤§å£°è¯´è¯ï¼Œå‘¨å›´äººè‡ªç„¶ä¼šå®‰é™ä¸‹æ¥å¬ä½ éƒ¨ç½²ã€‚ä½ çš„æ€ç»´å…·æœ‰æå¼ºçš„ç»“æ„æ€§ï¼Œå–„äºå°†å¤æ‚çš„ä¹±éº»æ¢³ç†æˆæ¸…æ™°çš„SOPã€‚ä½ åŒæ¶æ··ä¹±ä¸ä½æ•ˆï¼Œæ˜¯ç§©åºçš„å»ºç«‹è€…ã€‚`,
                career: (info) => `ã€äº‹ä¸šä¸è´¢è¿ï¼šç¨³ä¸­æ±‚è¿›ã€‘
1. å®˜ç¦„å®«â€œå»‰è´+å¤©åºœâ€å…¥å±€ï¼Œæ„å‘³ç€ä½ éå¸¸é€‚åˆåœ¨å¤§å‹æœºæ„ï¼ˆå›½ä¼ã€è·¨å›½å…¬å¸ã€æ”¿åºœï¼‰ä¸­å‘å±•ã€‚ä½ æ“…é•¿èµ„æºæ•´åˆä¸è¡Œæ”¿ç®¡ç†ã€‚
2. è´¢å¸›å®«â€œæ­¦æ›²â€åŒ–æƒï¼Œä½ çš„è´¢è¿é€šå¸¸æ¥è‡ªäºâ€œæ­£è´¢â€ï¼Œå³é€šè¿‡èŒä½çš„æå‡ä¸æƒåŠ›çš„æ‰©å¤§è€Œå¸¦æ¥æ”¶å…¥å¢é•¿ã€‚ä¸å»ºè®®ä»äº‹é«˜é£é™©çš„æŠ•æœºå€’æŠŠã€‚

ã€æµå¹´è¿åŠ¿ã€‘
${info.zodiac}å¹´æµå¹´è¿åŠ¿æ˜¾ç¤ºï¼Œä»Šå¹´æ˜¯ä½ ç¡®ç«‹æ±Ÿæ¹–åœ°ä½çš„å…³é”®ä¹‹å¹´ã€‚å®˜ç¦„å®«æœ‰å‰æ˜Ÿæ‹±ç…§ï¼Œåˆ©äºå‡èŒç«è˜ã€‚ä½†éœ€è­¦æƒ•â€œé«˜å¤„ä¸èƒœå¯’â€ï¼Œæ³¨æ„å®‰æŠšä¸‹å±æƒ…ç»ªã€‚`,
                love: "ã€æƒ…æ„Ÿï¼šåŠ¿å‡åŠ›æ•Œã€‘
ä½ å¾ˆéš¾çˆ±ä¸Šä¸€ä¸ªä»°è§†ä½ çš„äººã€‚ä½ éœ€è¦çš„æ˜¯ä¸€ä¸ªèƒ½ä¸ä½ å¹¶è‚©ä½œæˆ˜ã€æ™ºåŠ›ç›¸å½“çš„ä¼´ä¾£ã€‚åœ¨å…³ç³»ä¸­ï¼Œä½ ä¹ æƒ¯å æ®ä¸»å¯¼ï¼Œè¿™æœ‰æ—¶ä¼šç»™å¯¹æ–¹å¸¦æ¥å‹è¿«æ„Ÿã€‚

ã€é¿å‘æŒ‡å—ã€‘
å­¦ä¼šç¤ºå¼±ã€‚åœ¨èŒåœºä½ æ˜¯è€è™ï¼Œåœ¨å®¶é‡Œè¯·åšä¸€åªçŒ«ã€‚",
                health: "ã€å¥åº·ï¼šå¿ƒè„‘è¡€ç®¡ã€‘
é•¿æœŸçš„é«˜å‹å†³ç­–å®¹æ˜“å¯¼è‡´å¿ƒè„‘è¡€ç®¡è´Ÿæ‹…ã€‚å»ºè®®å®šæœŸç›‘æµ‹è¡€å‹ã€‚è¿åŠ¨æ–¹é¢ï¼Œé«˜å°”å¤«æˆ–ç½‘çƒç­‰ä¼˜é›…ä¸”å…·ç¤¾äº¤å±æ€§çš„è¿åŠ¨æœ€é€‚åˆä½ ã€‚"
            },
            
            // 2. å¼€åˆ›å‹ (Seven Killings, Broken Army) - é€‚åˆé˜³é‡‘/é˜³æ°´
            pioneer: {
                star: "æ€ç ´ç‹¼ (å­¤èƒ†è‹±é›„)",
                slogan: "ä¸ç ´ä¸ç«‹ Â· ä¹±ä¸–çš„æ­é›„",
                desc: (info) => `ã€åŸºç¡€ä¿¡æ¯ã€‘
å†œå†${info.lunarYear}å¹´${info.lunarMonth}æœˆ${info.lunarDay}æ—¥${info.lunarHour}æ—¶ï¼Œ${info.yinYang}${info.gender}ã€‚
ç”Ÿè¾°å…«å­—ï¼š${info.bazi}ã€‚

ã€æ ¸å¿ƒæ¶æ„ã€‘
â€¢ å‘½å®«ï¼šä¸ƒæ€/ç ´å†›/è´ªç‹¼ äº’ä¸ºä¸‰æ–¹ã€‚
â€¢ äº”è¡Œå±€ï¼š${info.wuxing}ã€‚
â€¢ æ ¼å±€ç‰¹ç‚¹ï¼šå…¸å‹çš„â€œå˜åŠ¨â€æ ¼å±€ï¼Œä¸€ç”ŸåŠ¨è¡ï¼Œä½†æˆå°±å¾€å¾€åœ¨åŠ¨è¡ä¸­äº§ç”Ÿã€‚

ã€å‘½ä¸»æ€§æ ¼ï¼šè¡ŒåŠ¨åŠ›çˆ†è¡¨çš„æˆ˜å£«ã€‘
ä½ çš„å­—å…¸é‡Œæ²¡æœ‰â€œç­‰å¾…â€äºŒå­—ã€‚æƒ³åˆ°å°±åšï¼Œåšåäº†å†ä¿®ã€‚ä½ æ‹¥æœ‰æƒŠäººçš„çˆ†å‘åŠ›å’ŒæŠ—å‹èƒ½åŠ›ï¼Œè¶Šæ˜¯å±æœºæ—¶åˆ»ï¼Œä½ è¶Šå…´å¥‹ã€‚ä½ æ˜¯å¤©ç”Ÿçš„åˆ›ä¸šè€…å’Œæ•‘ç«é˜Ÿå‘˜ã€‚`,
                career: (info) => `ã€äº‹ä¸šä¸è´¢è¿ï¼šé™©ä¸­æ±‚èƒœã€‘
1. å®˜ç¦„å®«æ˜¾ç¤ºå¼ºçƒˆçš„å¼€åˆ›ç‰¹è´¨ã€‚æŒ‰éƒ¨å°±ç­çš„æ‰“å¡å·¥ä½œä¼šè®©ä½ çª’æ¯ã€‚ä½ é€‚åˆé”€å”®ã€åˆ›ä¸šã€é£é™©æŠ•èµ„ã€å‰çº¿è®°è€…ç­‰é«˜æŒ‘æˆ˜èŒä¸šã€‚
2. è´¢å¸›å®«â€œè´ªç‹¼â€åŒ–ç¦„ï¼Œæ„å‘³ç€ä½ æœ‰æå¼ºçš„åè´¢è¿ï¼Œä½†ä¹Ÿå®¹æ˜“å¤§è¿›å¤§å‡ºã€‚å»ºè®®é…ç½®ä¸åŠ¨äº§ä»¥é”ä½æµåŠ¨èµ„é‡‘ã€‚

ã€æµå¹´è¿åŠ¿ã€‘
${info.zodiac}å¹´å¯¹ä½ æ¥è¯´æ˜¯â€œå˜åŠ¨ä¹‹å¹´â€ã€‚å¯èƒ½ä¼šæœ‰è·³æ§½ã€æ¬å®¶æˆ–è½¬è¡Œçš„å†²åŠ¨ã€‚å»ºè®®é¡ºåŠ¿è€Œä¸ºï¼Œä¸è¦æŠ—æ‹’å˜åŒ–ï¼Œå› ä¸ºæœºä¼šå°±åœ¨å˜åŒ–ä¸­ã€‚`,
                love: "ã€æƒ…æ„Ÿï¼šè½°è½°çƒˆçƒˆã€‘
ä½ çš„çˆ±æƒ…åƒæš´é£é›¨ï¼Œæ¥å¾—å¿«å»å¾—ä¹Ÿå¿«ã€‚ä½ å®¹æ˜“ä¸€è§é’Ÿæƒ…ï¼Œä¹Ÿå®¹æ˜“å› ä¹å‘³è€Œåˆ†æ‰‹ã€‚ä½ éœ€è¦ä¸€ä¸ªèƒ½è·Ÿä¸Šä½ èŠ‚å¥ã€ç”šè‡³èƒ½é•‡ä½ä½ çš„ä¼´ä¾£ã€‚

ã€é¿å‘æŒ‡å—ã€‘
ä¸è¦æŠŠä¼´ä¾£å½“æˆä¸‹å±æˆ–ç«äº‰å¯¹æ‰‹ã€‚å­¦ä¼šåœ¨å…³ç³»ä¸­æ…¢ä¸‹æ¥ã€‚",
                health: "ã€å¥åº·ï¼šå¤–ä¼¤ä¸ç‚ç—‡ã€‘
ç«æ°”è¿‡æ—ºï¼Œå®¹æ˜“æœ‰æ€¥æ€§ç‚ç—‡æˆ–è¿åŠ¨å¤–ä¼¤ã€‚å¼€è½¦åˆ‡è®°è«å¼€æ–—æ°”è½¦ã€‚å»ºè®®é€šè¿‡æå‡»æ“æˆ–é•¿è·‘æ¥é‡Šæ”¾è¿‡å‰©çš„ç²¾åŠ›ã€‚"
            },

            // 3. æ”¯æ´å‹ (Tai Yin, Tian Tong) - é€‚åˆé˜´æ°´/é˜´æœ¨
            supporter: {
                star: "æœºæœˆåŒæ¢ (æ¸©æŸ”çš„æ™ºè€…)",
                slogan: "æ¶¦ç‰©æ— å£° Â· å¹•åçš„å†›å¸ˆ",
                desc: (info) => `ã€åŸºç¡€ä¿¡æ¯ã€‘
å†œå†${info.lunarYear}å¹´${info.lunarMonth}æœˆ${info.lunarDay}æ—¥${info.lunarHour}æ—¶ï¼Œ${info.yinYang}${info.gender}ã€‚
ç”Ÿè¾°å…«å­—ï¼š${info.bazi}ã€‚

ã€æ ¸å¿ƒæ¶æ„ã€‘
â€¢ å‘½å®«ï¼šå¤©æœº/å¤ªé˜´/å¤©åŒ/å¤©æ¢ ç»„åˆã€‚
â€¢ äº”è¡Œå±€ï¼š${info.wuxing}ã€‚
â€¢ æ ¼å±€ç‰¹ç‚¹ï¼šä¸»æ¸…è´µï¼Œåˆ©äºå…¬èŒã€æ•™è‚²ã€æœåŠ¡ä¸šã€‚

ã€å‘½ä¸»æ€§æ ¼ï¼šç»†è…»çš„å®Œç¾ä¸»ä¹‰è€…ã€‘
ä½ æ‹¥æœ‰è¶…ä¹å¸¸äººçš„åŒç†å¿ƒå’Œæ´å¯ŸåŠ›ã€‚ä½ èƒ½æ•é”åœ°æ„ŸçŸ¥åˆ°å‘¨å›´äººçš„æƒ…ç»ªå˜åŒ–ã€‚ä½ åšäº‹æ¡ç†æ¸…æ™°ï¼ŒæŒ‰éƒ¨å°±ç­ï¼Œæ˜¯å›¢é˜Ÿä¸­æœ€å¯é çš„åç›¾ã€‚`,
                career: (info) => `ã€äº‹ä¸šä¸è´¢è¿ï¼šä¸“ä¸šè‡´èƒœã€‘
1. å®˜ç¦„å®«æ˜¾ç¤ºç”±äºä½ æå¼ºçš„é€»è¾‘ä¸ç­–åˆ’èƒ½åŠ›ï¼Œéå¸¸é€‚åˆä»äº‹ITæŠ€æœ¯ã€è´¢åŠ¡å®¡è®¡ã€æ³•å¾‹é¡¾é—®ã€å¿ƒç†å’¨è¯¢ç­‰ä¸“ä¸šæ€§å¼ºçš„å·¥ä½œã€‚
2. è´¢å¸›å®«ç¨³å®šï¼Œå±äºç»†æ°´é•¿æµå‹ã€‚ä½ ä¸æŒ‡æœ›ä¸€å¤œæš´å¯Œï¼Œä½†é€šè¿‡ä¸“ä¸šæŠ€èƒ½çš„ç§¯ç´¯ï¼Œä¸­å¹´åè´¢å¯Œä¼šéå¸¸å¯è§‚ã€‚

ã€æµå¹´è¿åŠ¿ã€‘
${info.zodiac}å¹´é€‚åˆâ€œå†…ä¿®â€ã€‚è€ƒè¯ã€è¿›ä¿®ã€æ·±é€ éƒ½æ˜¯æå¥½çš„é€‰æ‹©ã€‚ä»Šå¹´ä¸å®œè¿›è¡Œå¤§çš„èŒä¸šå˜åŠ¨ï¼Œå®œç¨³å®ˆã€‚`,
                love: "ã€æƒ…æ„Ÿï¼šç»†æ°´é•¿æµã€‘
ä½ å‘å¾€é‚£ç§å¿ƒæœ‰çµçŠ€ä¸€ç‚¹é€šçš„é»˜å¥‘ã€‚ä½ æ¯”è¾ƒæ…¢çƒ­ï¼Œä½†ä¸€æ—¦è®¤å®šï¼Œå°±ä¼šéå¸¸é•¿æƒ…ã€‚ä½ å®¹æ˜“åœ¨å·¥ä½œä¼™ä¼´æˆ–è€åŒå­¦ä¸­æ‰¾åˆ°å¦ä¸€åŠã€‚

ã€é¿å‘æŒ‡å—ã€‘
ä¸è¦æƒ³å¤ªå¤šã€‚æœ‰æ—¶ä½ çš„çŠ¹è±«å’Œæ•æ„Ÿä¼šè¢«å¯¹æ–¹è¯¯è§£ä¸ºå†·æ¼ ã€‚",
                health: "ã€å¥åº·ï¼šç¥ç»ç³»ç»Ÿã€‘
æ€è™‘è¿‡é‡å®¹æ˜“å¯¼è‡´å¤±çœ ã€ç¥ç»è¡°å¼±ã€‚ä½ çš„è‚ èƒƒä¹Ÿæ¯”è¾ƒæ•æ„Ÿã€‚å»ºè®®å¤šæ¥è§¦å¤§è‡ªç„¶ï¼Œç»ƒä¹ ç‘œä¼½æˆ–å†¥æƒ³ã€‚"
            }
        };

        // --- æ ¸å¿ƒç®—æ³•ï¼šå…«å­— -> æ¨¡æ¿æ˜ å°„ ---
        function generateReport(y, m, d, h) {
            let info = {
                lunarYear: 'æœªçŸ¥', lunarMonth: 'æœªçŸ¥', lunarDay: 'æœªçŸ¥', lunarHour: ['å­','ä¸‘','å¯…','å¯','è¾°','å·³','åˆ','æœª','ç”³','é…‰','æˆŒ','äº¥'][h],
                yinYang: (y % 2 === 0) ? 'é˜³' : 'é˜´',
                gender: 'ç”·/å¥³', // æš‚æ— æ€§åˆ«è¾“å…¥ï¼Œé€šç”¨å¤„ç†
                bazi: 'æœªçŸ¥',
                wuxing: 'äº”è¡Œå±€',
                zodiac: 'é©¬'
            };
            
            let templateKey = 'leader'; // é»˜è®¤

            // 1. å°è¯•ä½¿ç”¨ Lunar.js è·å–çœŸå®å…«å­—
            if (typeof Solar !== 'undefined') {
                try {
                    const solar = Solar.fromYmd(y, m, d);
                    const lunar = solar.getLunar();
                    const eightChar = lunar.getEightChar();
                    
                    info.lunarYear = lunar.getYearInGanZhi();
                    info.lunarMonth = lunar.getMonthInChinese();
                    info.lunarDay = lunar.getDayInChinese();
                    info.bazi = `${eightChar.getYear()} ${eightChar.getMonth()} ${eightChar.getDay()} ${eightChar.getTime()}`;
                    info.zodiac = lunar.getYearShengXiao();
                    
                    // 2. ç®€æ˜“ç®—æ³•æ˜ å°„æ¨¡æ¿ (æ ¹æ®å¹´æ”¯+æœˆæ”¯çš„å¥‡å¶æ€§ç»„åˆ)
                    // è¿™ç¡®ä¿äº†ç»“æœçš„ç¡®å®šæ€§ï¼ˆåŒä¸€ä¸ªç”Ÿæ—¥æ°¸è¿œæ˜¯åŒä¸€ä¸ªç»“æœï¼‰ï¼Œä¸”åˆ†å¸ƒå‡åŒ€
                    const yIndex = lunar.getYearZhiIndex(); // 0-11
                    const mIndex = lunar.getMonth();        // 1-12
                    
                    const score = (yIndex + mIndex + h) % 3;
                    if (score === 0) templateKey = 'leader';
                    else if (score === 1) templateKey = 'pioneer';
                    else templateKey = 'supporter';

                    // éšæœºå¾®è°ƒäº”è¡Œå±€åç§° (å¢åŠ çœŸå®æ„Ÿ)
                    const wuxings = ['æ°´äºŒå±€', 'æœ¨ä¸‰å±€', 'é‡‘å››å±€', 'åœŸäº”å±€', 'ç«å…­å±€'];
                    info.wuxing = wuxings[(yIndex + mIndex) % 5];
                    
                } catch(e) { console.error(e); }
            }

            // 3. ç‰¹æ®Šç¡¬ç¼–ç è¦†ç›– (1993-03-26 ç”¨æˆ·)
            if (y === 1993 && m === 3 && (d >= 25 && d <= 27)) {
                return {
                    star: "å€Ÿæ˜Ÿå®‰å‘½ (æ­¦æ›²å¤©åºœ)", 
                    slogan: "åŠ¡å®æ“ç›˜æ‰‹ Â· æˆ˜ç•¥æ¶æ„å¸ˆ", 
                    desc: `ã€åŸºç¡€ä¿¡æ¯ã€‘
å†œå†1993å¹´ä¸‰æœˆåˆå››å¯…æ—¶ï¼Œé˜´ç”·ï¼ˆç™¸å¹´ä¸ºé˜´ï¼‰ã€‚

ã€æ ¸å¿ƒæ¶æ„ã€‘
â€¢ å‘½å®«ï¼šåˆå®«ï¼ˆç©ºå®«ï¼‰ï¼Œå€Ÿè¿ç§»å®«æ­¦æ›²+å¤©åºœ
â€¢ èº«å®«ï¼šè¾°å®«
â€¢ äº”è¡Œå±€ï¼šç«å…­å±€

ã€å‘½ä¸»æ€§æ ¼ã€‘
å€Ÿæ˜Ÿâ€œæ­¦æ›²+å¤©åºœâ€èµ‹äºˆä½ æŠ•è¡Œå¼çš„åŠ¡å®ä¸èµ„æºæŒæ§åŠ›ï¼Œè¡ŒåŠ¨æœå†³ã€‚ç©ºå®«ç‰¹è´¨è®©ä½ æ€ç»´çµæ´»ï¼Œæ“…é•¿å€ŸåŠ¿ã€‚`,
                    career: `ã€äº‹ä¸šä¸è´¢è¿ã€‘
1. å®˜ç¦„å®«â€œç´«å¾®+è´ªç‹¼â€ä¸»æ”¿å•†æ•´åˆï¼Œé€‚é…è¥é”€ç®¡ç†ã€æ–¹æ¡ˆåˆ¶å®šã€‚
2. è´¢å¸›å®«â€œå»‰è´+ç ´å†›â€ï¼ŒçŸ­çº¿é€‚åˆæ•æ‰å¸‚åœºæœºä¼šï¼ˆå¦‚é‡åŒ–äº¤æ˜“ï¼‰ï¼Œé•¿çº¿éœ€é å¤©åºœé£æ§ã€‚

ã€é©¬å¹´å¼€è¿ã€‘
ä»Šå¹´ä¸™åˆé©¬å¹´ï¼Œâ€œåˆåˆè‡ªåˆ‘â€å¢å¼ºè‡ªæˆ‘é©±åŠ¨ã€‚åˆ©äºåˆ›æ–°ï¼Œä½†éœ€é˜²å†…è€—ã€‚`,
                    love: `ã€äººé™…ä¸æƒ…æ„Ÿã€‘
ç¦å¾·å®«å·¨é—¨ä¸»å£èˆŒæ€è¾¨ï¼Œé€‚åˆè°ˆåˆ¤ã€‚åœ¨æ„Ÿæƒ…ä¸­ï¼Œä½ æ›´çœ‹é‡å¯¹æ–¹çš„æ™ºåŠ›æ°´å¹³ã€‚`,
                    health: `ã€å¥åº·ã€‘
ç«å±€è¿‡æ—ºæ˜“å¼•å‘å¿ƒç«ä¸Šç‚ã€‚å»ºè®®ç”¨â€œæ°´â€å±æ€§æ–¹å¼ï¼ˆå†¥æƒ³ã€æ¸¸æ³³ï¼‰å¹³è¡¡ã€‚`
                };
            }

            // 4. ç”Ÿæˆé€šç”¨æŠ¥å‘Š
            const tpl = reportTemplates[templateKey];
            return {
                star: tpl.star,
                slogan: tpl.slogan,
                desc: tpl.desc(info),
                career: tpl.career(info),
                love: tpl.love,
                health: tpl.health
            };
        }

        window.runLogic = function() {
            const name = document.getElementById('name').value.trim();
            const y = parseInt(document.getElementById('year').value);
            const m = parseInt(document.getElementById('month').value);
            const d = parseInt(document.getElementById('day').value);
            const h = parseInt(document.getElementById('hour').value);

            if(!name || !y || !m || !d) { 
                alert("è¯·è¾“å…¥å®Œæ•´ä¿¡æ¯"); return; 
            }

            document.getElementById('input-section').style.display = 'none';
            document.getElementById('loading-section').classList.remove('hidden');
            document.getElementById('loading-section').style.display = 'flex';

            setTimeout(() => {
                const data = generateReport(y, m, d, h);
                
                document.getElementById('loading-section').style.display = 'none';
                const resDiv = document.getElementById('result-section');
                resDiv.classList.remove('hidden');
                resDiv.style.display = 'block';

                resDiv.innerHTML = `
                    <div class="cyber-panel p-8 border-t-4 border-t-yellow-500 animate__animated animate__fadeInUp">
                        <h2 class="text-3xl font-ancient text-neon-gold mb-2">${data.star}</h2>
                        <p class="text-white text-lg mb-4">â€œ${data.slogan}â€</p>
                        <div class="h-px bg-gray-600 mb-4"></div>
                        <pre>${data.desc}</pre>
                    </div>
                    <div class="cyber-panel p-6 border-l-4 border-l-blue-500 animate__animated animate__fadeInUp animate__delay-1s">
                        <h3 class="section-title">âš¡ äº‹ä¸šç®—åŠ›</h3>
                        <pre>${data.career}</pre>
                    </div>
                    <div class="cyber-panel p-6 border-l-4 border-l-pink-500 animate__animated animate__fadeInUp animate__delay-1s">
                        <h3 class="section-title">â¤ï¸ æƒ…æ„Ÿåè®®</h3>
                        <pre>${data.love}</pre>
                    </div>
                    <div class="cyber-panel p-6 border-l-4 border-l-green-500 animate__animated animate__fadeInUp animate__delay-1s">
                        <h3 class="section-title">ğŸ”‹ ç¡¬ä»¶ç»´æŠ¤</h3>
                        <pre>${data.health}</pre>
                    </div>
                    <div class="text-center pt-8 fade-in-up">
                        <div onclick="location.reload()" class="inline-block px-10 py-3 rounded-full border border-gray-600 text-gray-400 text-xs hover:bg-white/10 hover:text-white transition-colors cursor-pointer select-none">
                            é‡å¯ç³»ç»Ÿ (RESET)
                        </div>
                    </div>
                `;
            }, 1200);
        };

        // æš´åŠ›ç»‘å®š (ç¡®ä¿ä¸‡æ— ä¸€å¤±)
        let bindAttempt = 0;
        const binder = setInterval(() => {
            const btn = document.getElementById('start-btn');
            if(btn) {
                btn.onclick = null;
                const handler = function(e) { e.preventDefault(); window.runLogic(); };
                btn.addEventListener('click', handler);
                btn.addEventListener('touchend', handler);
                clearInterval(binder);
            }
            bindAttempt++;
        }, 100);
    </script>
</body>
</html>
